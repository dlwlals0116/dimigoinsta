FROM python:3.10.12

WORKDIR /home/

RUN echo "testing16"

RUN git clone https://github.com/turingclass/snsProject.git

WORKDIR /home/snsProject/

RUN pip install -r requirements.txt

RUN echo "SECRET_KEY=hq1gqn-ems!chzc3d8u0dtglr&zang-n&a3+7jz76cjdyn**ct" > .env

EXPOSE 7000

CMD ["bash", "-c", "python manage.py collectstatic --noinput --settings=snsProject.settings && \
python manage.py migrate --settings=snsProject.settings && \
gunicorn snsProject.wsgi --env DJANGO_SETTINGS_MODULE=snsProject.settings --bind 0.0.0.0:7000"]